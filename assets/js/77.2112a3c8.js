(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{483:function(s,t,a){"use strict";a.r(t);var n=a(2),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"esm-和-commonjs-的区别"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#esm-和-commonjs-的区别"}},[s._v("#")]),s._v(" "),t("code",[s._v("ESM")]),s._v(" 和 "),t("code",[s._v("CommonJS")]),s._v(" 的区别")]),s._v(" "),t("p",[s._v("不同点:")]),s._v(" "),t("ul",[t("li",[t("p",[t("code",[s._v("this")]),s._v(" 指向不同")]),s._v(" "),t("p",[t("code",[s._v("CommonJS")]),s._v(" 的 "),t("code",[s._v("this")]),s._v(" 指向的是当前 "),t("code",[s._v("module")]),s._v(", 默认是 "),t("code",[s._v("exports")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" args "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" require"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" filename"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" dirname"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("compiledWrapper")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apply")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" args"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("code",[s._v("ESM")]),s._v(" 由于语言层面的设计指向的是 "),t("code",[s._v("undefined")])])]),s._v(" "),t("li",[t("p",[t("code",[s._v("__filename")]),s._v(", "),t("code",[s._v("__dirname")]),s._v(" 在 "),t("code",[s._v("CommonJS")]),s._v(" 中存在, 而 "),t("code",[s._v("ESM")]),s._v(" 中不存在")]),s._v(" "),t("p",[s._v("在 CommonJS 中, 模块的执行需要用函数包裹, 并制定一些常用值. 所以我们在全局中可以直接用 "),t("code",[s._v("__filename")]),s._v(", "),t("code",[s._v("__dirname")]),s._v(".")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("NativeModule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("wrapper "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'(function (exports, require, module, __filename, __dirname) {'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\\n});'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])])])]),s._v(" "),t("p",[s._v("相同点:")]),s._v(" "),t("ul",[t("li",[t("p",[t("code",[s._v("ESM")]),s._v(" 和 "),t("code",[s._v("CommonJS")]),s._v(" 都有缓存")]),s._v(" "),t("p",[s._v("加载一次后将其缓存起来, 后续再次加载就直接用缓存中的")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);